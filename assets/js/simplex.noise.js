var SimplexNoise=function(t){null==t&&(t=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var i=0;i<256;i++)this.p[i]=Math.floor(256*t.random());this.perm=[];for(i=0;i<512;i++)this.perm[i]=this.p[255&i];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};SimplexNoise.prototype.dot=function(t,i,r){return t[0]*i+t[1]*r},SimplexNoise.prototype.dot3=function(t,i,r,o){return t[0]*i+t[1]*r+t[2]*o},SimplexNoise.prototype.dot4=function(t,i,r,o,s){return t[0]*i+t[1]*r+t[2]*o+t[3]*s},SimplexNoise.prototype.noise=function(t,i){var r,o,s=(t+i)*(.5*(Math.sqrt(3)-1)),h=Math.floor(t+s),e=Math.floor(i+s),p=(3-Math.sqrt(3))/6,a=(h+e)*p,m=t-(h-a),d=i-(e-a);m>d?(r=1,o=0):(r=0,o=1);var n=m-r+p,l=d-o+p,f=m-1+2*p,M=d-1+2*p,u=255&h,g=255&e,x=this.perm[u+this.perm[g]]%12,c=this.perm[u+r+this.perm[g+o]]%12,v=this.perm[u+1+this.perm[g+1]]%12,N=.5-m*m-d*d,S=.5-n*n-l*l,y=.5-f*f-M*M;return 70*((N<0?0:(N*=N)*N*this.dot(this.grad3[x],m,d))+(S<0?0:(S*=S)*S*this.dot(this.grad3[c],n,l))+(y<0?0:(y*=y)*y*this.dot(this.grad3[v],f,M)))},SimplexNoise.prototype.noise3d=function(t,i,r){var o,s,h,e,p,a,m=(t+i+r)*(1/3),d=Math.floor(t+m),n=Math.floor(i+m),l=Math.floor(r+m),f=1/6,M=(d+n+l)*f,u=t-(d-M),g=i-(n-M),x=r-(l-M);u>=g?g>=x?(o=1,s=0,h=0,e=1,p=1,a=0):u>=x?(o=1,s=0,h=0,e=1,p=0,a=1):(o=0,s=0,h=1,e=1,p=0,a=1):g<x?(o=0,s=0,h=1,e=0,p=1,a=1):u<x?(o=0,s=1,h=0,e=0,p=1,a=1):(o=0,s=1,h=0,e=1,p=1,a=0);var c=u-o+f,v=g-s+f,N=x-h+f,S=u-e+2*f,y=g-p+2*f,q=x-a+2*f,b=u-1+.5,j=g-1+.5,k=x-1+.5,w=255&d,z=255&n,A=255&l,B=this.perm[w+this.perm[z+this.perm[A]]]%12,C=this.perm[w+o+this.perm[z+s+this.perm[A+h]]]%12,D=this.perm[w+e+this.perm[z+p+this.perm[A+a]]]%12,E=this.perm[w+1+this.perm[z+1+this.perm[A+1]]]%12,F=.6-u*u-g*g-x*x,G=.6-c*c-v*v-N*N,H=.6-S*S-y*y-q*q,I=.6-b*b-j*j-k*k;return 32*((F<0?0:(F*=F)*F*this.dot3(this.grad3[B],u,g,x))+(G<0?0:(G*=G)*G*this.dot3(this.grad3[C],c,v,N))+(H<0?0:(H*=H)*H*this.dot3(this.grad3[D],S,y,q))+(I<0?0:(I*=I)*I*this.dot3(this.grad3[E],b,j,k)))},SimplexNoise.prototype.noise4d=function(t,i,r,o){var s,h,e,p,a,m,d,n,l,f,M,u,g=this.grad4,x=this.simplex,c=this.perm,v=(Math.sqrt(5)-1)/4,N=(5-Math.sqrt(5))/20,S=(t+i+r+o)*v,y=Math.floor(t+S),q=Math.floor(i+S),b=Math.floor(r+S),j=Math.floor(o+S),k=(y+q+b+j)*N,w=t-(y-k),z=i-(q-k),A=r-(b-k),B=o-(j-k),C=(w>z?32:0)+(w>A?16:0)+(z>A?8:0)+(w>B?4:0)+(z>B?2:0)+(A>B?1:0),D=w-(s=x[C][0]>=3?1:0)+N,E=z-(h=x[C][1]>=3?1:0)+N,F=A-(e=x[C][2]>=3?1:0)+N,G=B-(p=x[C][3]>=3?1:0)+N,H=w-(a=x[C][0]>=2?1:0)+2*N,I=z-(m=x[C][1]>=2?1:0)+2*N,J=A-(d=x[C][2]>=2?1:0)+2*N,K=B-(n=x[C][3]>=2?1:0)+2*N,L=w-(l=x[C][0]>=1?1:0)+3*N,O=z-(f=x[C][1]>=1?1:0)+3*N,P=A-(M=x[C][2]>=1?1:0)+3*N,Q=B-(u=x[C][3]>=1?1:0)+3*N,R=w-1+4*N,T=z-1+4*N,U=A-1+4*N,V=B-1+4*N,W=255&y,X=255&q,Y=255&b,Z=255&j,$=c[W+c[X+c[Y+c[Z]]]]%32,_=c[W+s+c[X+h+c[Y+e+c[Z+p]]]]%32,tt=c[W+a+c[X+m+c[Y+d+c[Z+n]]]]%32,it=c[W+l+c[X+f+c[Y+M+c[Z+u]]]]%32,rt=c[W+1+c[X+1+c[Y+1+c[Z+1]]]]%32,ot=.6-w*w-z*z-A*A-B*B,st=.6-D*D-E*E-F*F-G*G,ht=.6-H*H-I*I-J*J-K*K,et=.6-L*L-O*O-P*P-Q*Q,pt=.6-R*R-T*T-U*U-V*V;return 27*((ot<0?0:(ot*=ot)*ot*this.dot4(g[$],w,z,A,B))+(st<0?0:(st*=st)*st*this.dot4(g[_],D,E,F,G))+(ht<0?0:(ht*=ht)*ht*this.dot4(g[tt],H,I,J,K))+(et<0?0:(et*=et)*et*this.dot4(g[it],L,O,P,Q))+(pt<0?0:(pt*=pt)*pt*this.dot4(g[rt],R,T,U,V)))};